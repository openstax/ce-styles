//folio content strings
[data-type="chapter"] > h1[data-type="document-title"] {
  .os-number {
    string-set: chapter-number content();
}
  .os-text {
    string-set: chapter-title content();
  }
}

[data-type="chapter"] > [data-type="page"] > h2[data-type="document-title"] {
  .os-number {
    string-set: module-number content();
  }
  .os-text {
    string-set: module-title content();
  }
}

div[data-type="composite-page"].os-eoc > h2[data-type="document-title"] {
  .os-text {
    string-set: eoc-title content();
  }
}

.appendix > h1[data-type="document-title"] {
  .os-number {
    string-set: appendix-number content();
}
  .os-text {
    string-set: appendix-title content();
  }
}

div[data-type="composite-page"].os-eob > h1[data-type="document-title"] {
  .os-text {
    string-set: eob-title content();
  }
}

//page definitions
nav#toc {
  page: table-of-contents;
}

div[data-type="page"].preface {
  page: preface;
  counter-reset: page 1;
}

div[data-type="composite-page"].os-eoc {
  page: eoc;
}

.chapter {
  page: chapter;
  prince-page-group: start;
}

div[data-type="page"].appendix {
  page: appendix;
}

div[data-type="composite-page"].os-eob {
  page: eob;
}



//unnumbered pages
@page chapter:nth(1) {
  @top-left-corner {
    content: none;
  }
  @top-right-corner {
    content: none;
  }
  @top-left {
    content: none;
  }
  @top-center {
    content: none;
  }
  @top-right {
    content: none;
  }
}

@page table-of-contents {
  @top-left-corner {
    content: none;
  }
  @top-left {
    content: none;
  }
  @top-right-corner {
    content: none;
  }
  @top-right {
    content: none;
  }
}

//numbered pages
@mixin folioStyles() {
  font-size: font-scale(-1);
  font-family: "Muli";
  color: #A5A5A5; 
  font-weight: 700;
}

@mixin folio($leftContent, $rightContent, $page: null ) {
  @page #{$page}:left {
    @top-left {
      @include folioStyles();
      content: $leftContent;
    }
    @top-left-corner {
      @include folioStyles();
      content: counter(page);
      margin-right: h-grid(5);
    }
  }

  @page #{$page}:right {
    @top-right {
      @include folioStyles();
      content: $rightContent;
    }
    @top-right-corner {
      @include folioStyles();
      content: counter(page);
      margin-left: h-grid(5);
    }
  }
}

@mixin folioWithBand($leftContent, $rightContent, $page) {
    @page #{$page}:left {
      @top-left {
        @include folioStyles();
        content: counter(page) " " $leftContent;
        margin-left: h-grid(5);
      }
    }
  
    @page #{$page}:right {
      @top-right {
        @include folioStyles();
        content: counter(page) " " $rightContent;
        margin-right: h-grid(5);
      }
    }
  }


$defaultLeftContent: string(chapter-number) " • " string(chapter-title);
$defaultRightContent: string(module-number) " • " string(module-title);
$prefaceContent: "Preface";
$eocContent: string(chapter-number) " • " string(eoc-title);
$appendixContent: string(appendix-number) " • " string(appendix-title);
$eobContent: string(eob-title);

@include folio($defaultLeftContent, $defaultRightContent);
@include folio($prefaceContent, $prefaceContent, preface );
@include folioWithBand($eocContent, $eocContent, eoc);
@include folioWithBand($appendixContent, $appendixContent, appendix);
@include folioWithBand($eobContent, $eobContent, eob);

