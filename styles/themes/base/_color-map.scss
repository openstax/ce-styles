@function scale-uniform($color, $scale) {
  @return rgb(round(red($color) * $scale), round(green($color) * $scale), round(blue($color) * $scale));
}

// Default color map
@function default-color-map() {
  $DEFAULT_COLOR_MAP: (
    standard-white: color-scheme(standard-white),
    standard-black: color-scheme(standard-black),

    feature-body-1: #F2F2F2,
    feature-body-2: #D6D9DD,
    feature-body-3: #D3E3EB,

    folio-chapter-header: color-scheme(standard-white),
    folio: color-scheme(secondary),

    colored-text: color-scheme(alert-primary),
    body-link: color-scheme(accent-primary),
    note-link: color-scheme(accent-secondary),

    footnote: color-scheme(accent-tertiary),
    footnote-bg: linear-gradient(180deg, color-scheme(quaternary), color-scheme(quaternary)),

    preface-title: color-scheme(secondary),

    table-border: scale-uniform(color-scheme(standard-white), 0.95),
    table-body-border: rgba(color-scheme(standard-black), 0.1),
    table-content: color-scheme(secondary),
    table-head: color-scheme(secondary),
    table-head-bg: color-scheme(quinary),
    th-border: color-scheme(standard-black),
    td-border: color-scheme(standard-black),
    colored-table-bg: color-scheme(accent-quinary),
    first-th-bg: color-scheme(quinary),
    first-th: color-scheme(secondary),
    second-th-bg: color-scheme(primary),
    second-th: color-scheme(standard-white),

    text-heavy-bg: color-scheme(standard-white),
    text-heavy-border: scale-uniform(color-scheme(standard-white), 0.9),
    text-heavy-content: color-scheme(secondary),

    col-header: color-scheme(standard-white),
    col-header-bg: color-scheme(secondary),

    toc-title: color-scheme(secondary),
    toc-link: color-scheme(secondary),
    toc-chapter-link: color-scheme(primary),
    toc-number-border: color-scheme(quinary),
    toc-number: color-scheme(primary),
    toc-odd-bg: color-scheme(accent-quaternary),
    toc-side-border: color-scheme(accent-quaternary),

    chapter-number-bg: color-scheme(standard-white),
    chapter-number: color-scheme(secondary),
    chapter-number-border: color-scheme(standard-white),
    chapter-title: color-scheme(standard-white),
    intro-title: color-scheme(primary),
    splash-bottom-bar: color-scheme(primary),
    splash-bottom-bar-border: darken(color-scheme(primary), 20%),

    chapter-outline-title: color-scheme(primary),
    chapter-outline-sections: color-scheme(standard-black),
    chapter-outline-number: color-scheme(primary),
    chapter-outline-link: color-scheme(secondary),

    LO-title: color-scheme(secondary),
    LO-section-titles: color-scheme(primary),

    h1-title: color-scheme(primary),
    h1-number: color-scheme(secondary),
    h1-number-border: color-scheme(primary),
    h2-title: color-scheme(secondary),
    module-number-border: color-scheme(quinary),
    h3-title: color-scheme(secondary),
    h4-title: color-scheme(secondary),
    h5-title: color-scheme(standard-black),

    example-bg: color-scheme(primary),
    example-title: color-scheme(standard-white),

    notes-title: color-scheme(primary),
    notes-subtitle: color-scheme(secondary),
    notes-body-text: color-scheme(standard-black),
    notes-border: scale-uniform(color-scheme(standard-white), 0.9),

    EOC-titles: color-scheme(secondary),
    EOC-subtitles: color-scheme(secondary),

    caption: rgba(color-scheme(standard-black), 0.6),
    caption-number: color-scheme(standard-black),

    appendix-title: color-scheme(secondary),
    appendix-number: color-scheme(secondary),
    appendix-number-border: color-scheme(primary)
  );
  @return $DEFAULT_COLOR_MAP;
}

@function color_map($name) {
  @if map-has-key($color_map, $name) {
    @return map-get($color_map, $name);
  }
  @error "Unknown color map designation: #{$name}";
}

// Ensure all default keys are available from $color_map and color_map()
$color-map: default-color-map() !default;
$color-map: map-merge(default-color-map(), $color-map);
