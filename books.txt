#!/bin/bash

BOOK_CONFIGS=(
  "statistics         statistics        30189442-6998-4686-ac05-ed152b91b9de    tea.cnx.org"
  "TEAhsstats         statistics        ace2ec2d-778e-44aa-82c2-57a4e5c3de69    cte-cnx-dev.cnx.org"
  "econ               economics         69619d2b-68f0-44b0-b074-a9b2bf90b2c6    tea.cnx.org"
  "econap             economics         69619d2b-68f0-44b0-b074-a9b2bf90b2c6    tea.cnx.org"
  "macroecon          economics         4061c832-098e-4b3c-a1d9-7eb593a2cb31    tea.cnx.org"
  "macroeconap        economics         33076054-ec1d-4417-8824-ce354efe42d0    tea.cnx.org"
  "microecon          economics         ea2f225e-6063-41ca-bcd8-36482e15ef65    tea.cnx.org"
  "microeconap        economics         ca344e2d-6731-43cd-b851-a7b3aa0b37aa    tea.cnx.org"
  "TEAmacroeconap     economics         3353a691-0c52-4691-8f36-65490cd3d962    cte-cnx-dev.cnx.org"
  "TEAmicroeconap     economics         7f6fbc5b-6f3b-40a8-87ac-b14adc941e5e    cte-cnx-dev.cnx.org"
  "physics            physics           031da8d3-b525-429c-80cf-6c8ed997733a    tea.cnx.org"
  "TEAapphysics       ap-physics        8d04a686-d5e8-4798-a27d-c608e4d0e187    tea.cnx.org"
  "TEAhsphysics       hs-physics        dbfdc541-752c-4a79-9e83-d32b1ca2c176    tea.cnx.org"
  # "biology            biology           185cbf87-c72e-48f5-b51e-f14f21b5eabd    tea.cnx.org"
)

BOOK_NAMES=()
RULESET_NAMES=()

# From http://stackoverflow.com/a/8574392
containsElement () {
  local e
  for e in "${@:2}"; do [[ "$e" == "$1" ]] && return 0; done
  return 1
}

# Use double-underscores so the name does not conflict with other scripts' local vars
# since this is loaded using 'source ./books.txt'
for __bookConfig in "${BOOK_CONFIGS[@]}"
do
  read -r __bookName __rulesetName uuid _ <<< "${__bookConfig}"
  # Add to the list of BOOK_NAMES and RULESET_NAMES
  containsElement "${__bookName}" "${BOOK_NAMES[@]}" || BOOK_NAMES+=("${__bookName}")
  containsElement "${__rulesetName}" "${RULESET_NAMES[@]}" || RULESET_NAMES+=("${__rulesetName}")

done
