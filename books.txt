#!/bin/bash

# These columns are  recipeName and long description
RECIPE_DESC=(
"ap-biology     AP Biology"
"ap-physics     AP Physics"
"biology        Biology"
"economics      Economics"
"hs-physics     High School Physics"
"physics        Physics"
"statistics     Statistics"
"TEAap-biology  AP-Biology (TEA version)"
"TEAap-physics  AP-Physics (TEA version)"
"TEAeconomics   Economics (TEA version)"
"TEAhs-physics  High School Physics (TEA version)"
"TEAstatistics  Statistics (TEA version)"
"u-physics      University Physics"
)


# These columns are:
# - bookName
# - recipeName
# - uuid : The uuid to use for ./script/fetch-book
# - hostName : The hostName to use when running ./script/fetch-book and ./script/bake-book-remote
# - additionalStyleguideDirs : These specify which additional directories should be included when generating the styleguide

BOOK_CONFIGS=(
# "_example           _example          example-uuid                            tea.cnx.org          mixins/"
  "statistics         statistics        30189442-6998-4686-ac05-ed152b91b9de    dev.cnx.org        mixins/"
  "econ               economics         69619d2b-68f0-44b0-b074-a9b2bf90b2c6    dev.cnx.org          mixins/"
  "macroecon          economics         4061c832-098e-4b3c-a1d9-7eb593a2cb31    dev.cnx.org          mixins/"
  "macroeconap        economics         33076054-ec1d-4417-8824-ce354efe42d0    dev.cnx.org          mixins/"
  "microecon          economics         ea2f225e-6063-41ca-bcd8-36482e15ef65    dev.cnx.org          mixins/"
  "microeconap        economics         ca344e2d-6731-43cd-b851-a7b3aa0b37aa    dev.cnx.org          mixins/"
  "biology            biology           185cbf87-c72e-48f5-b51e-f14f21b5eabd    dev.cnx.org          mixins/"
  "apbiology          ap-biology        27cf60e4-bd82-418a-a7bb-a939c40f8f50    tea.cnx.org          mixins/,books/biology"
  "physics            physics           031da8d3-b525-429c-80cf-6c8ed997733a    dev.cnx.org          mixins/"
  "apphysics          ap-physics        8d04a686-d5e8-4798-a27d-c608e4d0e187    dev.cnx.org          mixins/,books/physics/"
  "u-physics          u-physics         d50f6e32-0fda-46ef-a362-9bd36ca7c97d    dev.cnx.org          mixins/,books/physics/"
  "TEAapbiology       TEAap-biology     7ddd15c3-f3d8-4010-8a5b-7fa37fba99a6    tea.cnx.org          mixins/,books/biology/,books/ap-biology"
  "TEAapphysics       TEAap-physics     df721c85-4c66-4b94-9197-a386df683af5    tea.cnx.org          mixins/,books/ap-physics/,books/physics/"
  "TEAapphysics2      TEAap-physics     12af895f-1ec3-4253-83d1-05724ea13273    tea.cnx.org          mixins/,books/ap-physics/,books/physics/"
  "TEAmacroeconap     TEAeconomics      b30d51fa-86b7-4850-ae82-09a4428ff004    tea.cnx.org          mixins/,books/economics/"
  "TEAmicroeconap     TEAeconomics      206e821b-0ef4-48dc-974d-3bbb635df3a4    tea.cnx.org          mixins/,books/economics/"
  "TEAhsphysics       TEAhs-physics     43e35fe7-5afb-496d-b1b0-2f4bd7aab1f2    tea.cnx.org          mixins/,books/hs-physics/"
  "TEAhsstats         TEAstatistics     b1258494-63dd-4a72-b0f0-a09e659964b7    tea.cnx.org          mixins/,books/statistics/"
)

BOOK_NAMES=()
RECIPE_NAMES=()

# From http://stackoverflow.com/a/8574392
containsElement () {
  local e
  for e in "${@:2}"; do [[ "$e" == "$1" ]] && return 0; done
  return 1
}

# Use double-underscores so the name does not conflict with other scripts' local vars
# since this is loaded using 'source ./books.txt'
for __bookConfig in "${BOOK_CONFIGS[@]}"
do
  read -r __bookName __recipeName uuid _ <<< "${__bookConfig}"
  # Add to the list of BOOK_NAMES and RECIPE_NAMES
  containsElement "${__bookName}" "${BOOK_NAMES[@]}" || BOOK_NAMES+=("${__bookName}")
  containsElement "${__recipeName}" "${RECIPE_NAMES[@]}" || RECIPE_NAMES+=("${__recipeName}")

done
