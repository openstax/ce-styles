#!/bin/bash

# These columns are  recipe_name and long description
declare -x -r RECIPE_DESC=(
"microbiology		Microbiology"
"anatomy                Anatomy and Physiology"
"history		U.S. History"
"psychology             Psychology"
"chemistry              Chemistry"
"astronomy              Astronomy"
"principles-management  Principles of Management"
"entrepreneurship       Entrepreneurship"
"accounting             Accounting"
"business-ethics        Business Ethics"
"intro-business         Intro to Business"
"ap-biology             AP Biology"
"ap-physics             AP Physics"
"biology                Biology"
"economics              Economics"
"hs-physics             High School Physics"
"physics                Physics"
"statistics             Statistics"
"TEAap-biology          AP-Biology (TEA version)"
"TEAap-physics          AP-Physics (TEA version)"
"TEAeconomics           Economics (TEA version)"
"TEAhs-physics          High School Physics (TEA version)"
"TEAstatistics          Statistics (TEA version)"
"u-physics              University Physics"
"sociology              Introduction to Sociology 2e"
"dev-math               Developmental Math"
"american-government    American Government"
)


# These columns are:
# - book_name
# - recipe_name
# - uuid : The uuid to use for ./script/fetch-book
# - host_name : The host_name to use when running ./script/fetch-book and ./script/bake-book-remote
# - additionalStyleguideDirs : These specify which additional directories should be included when building the styleguide

BOOK_CONFIGS=(
# "_example           _example          example-uuid                            tea.cnx.org          mixins/"
  "microbiology       microbiology	e42bd376-624b-4c0f-972f-e0c57998e765	katalyst01.cnx.org   mixins/"
  "anatomy            anatomy           14fb4ad7-39a1-4eee-ab6e-3ef2482e3e22    katalyst01.cnx.org    mixins/"
  "history	      history           a7ba2fb8-8925-4987-b182-5f4429d48daa	katalyst01.cnx.org    mixins/"
  "psychology         psychology        4abf04bf-93a0-45c3-9cbc-2cefd46e68cc	katalyst01.cnx.org    mixins/"
  "chemistry          chemistry         85abf193-2bd2-4908-8563-90b8a7ac8df6	katalyst01.cnx.org    mixins/"
  "astronomy          astronomy         2e737be8-ea65-48c3-aa0a-9f35b4c6a966    katalyst01.cnx.org    mixins/"
  "principles-management      principles-management      62710222-02f1-4972-ab05-4060032e71f4      devb.cnx.org           mixins/"
  "entrepreneurship   entrepreneurship  ea5ef07f-f732-4a42-9351-4f0126dbe7a0    devb.cnx.org          mixins/"
  "accounting         accounting        97a78dc7-103e-4acf-82d4-967b2d66aa05    devb.cnx.org          mixins/"
  "business-ethics    business-ethics   5948fa4d-f274-4780-9336-8db4f1e707f4    devb.cnx.org          mixins/"
  "intro-business     intro-business    326ab45b-ef3c-4fdb-a4d4-a30c61b0b18b    devb.cnx.org          mixins/"
  "statistics         statistics        30189442-6998-4686-ac05-ed152b91b9de    katalyst01.cnx.org    mixins/"
  "econ               economics         69619d2b-68f0-44b0-b074-a9b2bf90b2c6    devb.cnx.org          mixins/"
  "macroecon          economics         4061c832-098e-4b3c-a1d9-7eb593a2cb31    devb.cnx.org          mixins/"
  "macroeconap        economics         33076054-ec1d-4417-8824-ce354efe42d0    devb.cnx.org          mixins/"
  "microecon          economics         ea2f225e-6063-41ca-bcd8-36482e15ef65    devb.cnx.org          mixins/"
  "microeconap        economics         ca344e2d-6731-43cd-b851-a7b3aa0b37aa    devb.cnx.org          mixins/"
  "biology            biology           185cbf87-c72e-48f5-b51e-f14f21b5eabd    devb.cnx.org          mixins/"
  "apbiology          ap-biology        6c322e32-9fb0-4c4d-a1d7-20c95c5c7af2    katalyst01.cnx.org          mixins/,books/biology"
  "physics            physics           031da8d3-b525-429c-80cf-6c8ed997733a    devb.cnx.org          mixins/"
  "apphysics          ap-physics        8d04a686-d5e8-4798-a27d-c608e4d0e187    katalyst01.cnx.org          mixins/,books/physics/"
  "u-physics          u-physics         d50f6e32-0fda-46ef-a362-9bd36ca7c97d    devb.cnx.org          mixins/,books/physics/"
  "katalyst-physics   u-physics         4f45f6e1-a937-4390-a57a-a775b4065106    content01.cnx.org    mixins"
  "sociology           sociology   02040312-72c8-441e-a685-20e9333f3e1d    katalyst01.cnx.org    mixins/"
  "prealgebra         dev-math          caa57dab-41c7-455e-bd6f-f443cda5519c    katalyst01.cnx.org   mixins/"
  "elementary-algebra dev-math          0889907c-f0ef-496a-bcb8-2a5bb121717f    katalyst01.cnx.org   mixins/"
  "intermediate-algebra      dev-math          02776133-d49d-49cb-bfaa-67c7f61b25a1    katalyst01.cnx.org   mixins/"
  "american-government american-government     5bcc0e59-7345-421d-8507-a1e4608685e8    katalyst01.cnx.org   mixins/"
)

BOOK_NAMES=()
RECIPE_NAMES=()

# From http://stackoverflow.com/a/8574392
containsElement () {
  local e
  for e in "${@:2}"; do [[ "$e" == "$1" ]] && return 0; done
  return 1
}

# Use double-underscores so the name does not conflict with other scripts' local vars
# since this is loaded using 'source ./books.txt'
for __book_config in "${BOOK_CONFIGS[@]}"
do
  read -r __book_name __recipe_name _ _ <<< "${__book_config}"
  # Add to the list of BOOK_NAMES and RECIPE_NAMES
  containsElement "${__book_name}" "${BOOK_NAMES[@]}" || BOOK_NAMES+=("${__book_name}")
  containsElement "${__recipe_name}" "${RECIPE_NAMES[@]}" || RECIPE_NAMES+=("${__recipe_name}")

done
